(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{153:function(e,t,a){"use strict";a.r(t),a.d(t,"frontMatter",(function(){return i})),a.d(t,"metadata",(function(){return c})),a.d(t,"rightToc",(function(){return l})),a.d(t,"default",(function(){return s}));var n=a(2),r=a(9),o=(a(0),a(176)),i={id:"cash",title:"App Protocol",sidebar_label:"App Protocol"},c={id:"cash",isDocsHomePage:!1,title:"App Protocol",description:"MoneyStream Application Protocol",source:"@site/docs/cash.md",permalink:"/moneystream-project/docs/cash",editUrl:"https://github.com/facebook/docusaurus/edit/master/website/docs/cash.md",sidebar_label:"App Protocol",sidebar:"someSidebar",previous:{title:"MoneyStream Known Issues",permalink:"/moneystream-project/docs/knownissues"},next:{title:"Bitcoin",permalink:"/moneystream-project/docs/bitcoin"}},l=[{value:"MoneyStream Application Protocol",id:"moneystream-application-protocol",children:[]},{value:"Initial Transaction",id:"initial-transaction",children:[]},{value:"Augment Funding with additional inputs",id:"augment-funding-with-additional-inputs",children:[]},{value:"Exhaust a UTXO or wallet completely",id:"exhaust-a-utxo-or-wallet-completely",children:[]},{value:"API return value",id:"api-return-value",children:[]}],b={rightToc:l};function s(e){var t=e.components,a=Object(r.a)(e,["components"]);return Object(o.b)("wrapper",Object(n.a)({},b,a,{components:t,mdxType:"MDXLayout"}),Object(o.b)("h2",{id:"moneystream-application-protocol"},"MoneyStream Application Protocol"),Object(o.b)("p",null,"Post the following types of cash transactions to either the ",Object(o.b)("inlineCode",{parentName:"p"},"progress")," or ",Object(o.b)("inlineCode",{parentName:"p"},"stop")," methods of the API. Include the ",Object(o.b)("inlineCode",{parentName:"p"},"payTo")," paymail or Bitcoin address.  "),Object(o.b)("p",null,"The post data will look like this.  "),Object(o.b)("pre",null,Object(o.b)("code",Object(n.a)({parentName:"pre"},{}),'{\n    session:"your session id",\n    hex: "transaction hex",\n    payTo: "paymail or bitcoin address"\n}\n')),Object(o.b)("p",null,"Post the request to ",Object(o.b)("inlineCode",{parentName:"p"},"https://cash.bitcoinofthings.com/stream/progress")," or ",Object(o.b)("inlineCode",{parentName:"p"},"https://cash.bitcoinofthings.com/stream/stop")),Object(o.b)("div",{className:"admonition admonition-danger alert alert--danger"},Object(o.b)("div",Object(n.a)({parentName:"div"},{className:"admonition-heading"}),Object(o.b)("h5",{parentName:"div"},Object(o.b)("span",Object(n.a)({parentName:"h5"},{className:"admonition-icon"}),Object(o.b)("svg",Object(n.a)({parentName:"span"},{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"}),Object(o.b)("path",Object(n.a)({parentName:"svg"},{fillRule:"evenodd",d:"M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"})))),"danger")),Object(o.b)("div",Object(n.a)({parentName:"div"},{className:"admonition-content"}),Object(o.b)("p",{parentName:"div"},"These are cash transactions! Treat them as such with all due care. Anyone who intercepts the transaction can change the output and spend it to themselves. Always transmit cash transactions over a secure channel to a known party.  "))),Object(o.b)("div",{className:"admonition admonition-important alert alert--info"},Object(o.b)("div",Object(n.a)({parentName:"div"},{className:"admonition-heading"}),Object(o.b)("h5",{parentName:"div"},Object(o.b)("span",Object(n.a)({parentName:"h5"},{className:"admonition-icon"}),Object(o.b)("svg",Object(n.a)({parentName:"span"},{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"}),Object(o.b)("path",Object(n.a)({parentName:"svg"},{fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"})))),"important")),Object(o.b)("div",Object(n.a)({parentName:"div"},{className:"admonition-content"}),Object(o.b)("p",{parentName:"div"},"All transactions should use a nTimeLock 60 seconds in the future. A transaction that is not timelocked will close the session. A transaction that is too far in the future might get rejected. You must post to the ",Object(o.b)("inlineCode",{parentName:"p"},"progress")," method before locktime otherwise the session will automatically close.",Object(o.b)("br",{parentName:"p"}),"\n","Signing with SIGHASH_FORKID is assumed.  "))),Object(o.b)("h2",{id:"initial-transaction"},"Initial Transaction"),Object(o.b)("table",null,Object(o.b)("thead",{parentName:"table"},Object(o.b)("tr",{parentName:"thead"},Object(o.b)("th",Object(n.a)({parentName:"tr"},{align:null}),"Index"),Object(o.b)("th",Object(n.a)({parentName:"tr"},{align:null}),"SigHash"),Object(o.b)("th",Object(n.a)({parentName:"tr"},{align:null}),"Output"))),Object(o.b)("tbody",{parentName:"table"},Object(o.b)("tr",{parentName:"tbody"},Object(o.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"0"),Object(o.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"SIGHASH_SINGLE","|","ANYONECANPAY"),Object(o.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"Change Amount")))),Object(o.b)("p",null,"Adjust funding with change amount as necessary."),Object(o.b)("h2",{id:"augment-funding-with-additional-inputs"},"Augment Funding with additional inputs"),Object(o.b)("table",null,Object(o.b)("thead",{parentName:"table"},Object(o.b)("tr",{parentName:"thead"},Object(o.b)("th",Object(n.a)({parentName:"tr"},{align:null}),"Index"),Object(o.b)("th",Object(n.a)({parentName:"tr"},{align:null}),"SigHash"),Object(o.b)("th",Object(n.a)({parentName:"tr"},{align:null}),"Output"))),Object(o.b)("tbody",{parentName:"table"},Object(o.b)("tr",{parentName:"tbody"},Object(o.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"0"),Object(o.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"SIGHASH_SINGLE","|","ANYONECANPAY"),Object(o.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"Change Amount")),Object(o.b)("tr",{parentName:"tbody"},Object(o.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"1"),Object(o.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"SIGHASH_NONE"),Object(o.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"(no output)")))),Object(o.b)("p",null,"Add additional inputs when necessary."),Object(o.b)("h2",{id:"exhaust-a-utxo-or-wallet-completely"},"Exhaust a UTXO or wallet completely"),Object(o.b)("p",null,"Example of exhausting two utxos.  "),Object(o.b)("table",null,Object(o.b)("thead",{parentName:"table"},Object(o.b)("tr",{parentName:"thead"},Object(o.b)("th",Object(n.a)({parentName:"tr"},{align:null}),"Index"),Object(o.b)("th",Object(n.a)({parentName:"tr"},{align:null}),"SigHash"),Object(o.b)("th",Object(n.a)({parentName:"tr"},{align:null}),"Output"))),Object(o.b)("tbody",{parentName:"table"},Object(o.b)("tr",{parentName:"tbody"},Object(o.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"0"),Object(o.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"SIGHASH_NONE"),Object(o.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"(no output)")),Object(o.b)("tr",{parentName:"tbody"},Object(o.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"1"),Object(o.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"SIGHASH_NONE"),Object(o.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"(no output)")))),Object(o.b)("h2",{id:"api-return-value"},"API return value"),Object(o.b)("p",null,"The API will return a json result with status and description as well as the txid."),Object(o.b)("p",null,"Example:  "),Object(o.b)("pre",null,Object(o.b)("code",Object(n.a)({parentName:"pre"},{}),'{\n    token: "your session id",\n    txid: "transaction id",\n    status: {\n        returnResult: "monetize/failure",\n        resultDescription:" reason for error"\n    }\n}\n')))}s.isMDXComponent=!0},176:function(e,t,a){"use strict";a.d(t,"a",(function(){return p})),a.d(t,"b",(function(){return m}));var n=a(0),r=a.n(n);function o(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function i(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function c(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?i(Object(a),!0).forEach((function(t){o(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function l(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var b=r.a.createContext({}),s=function(e){var t=r.a.useContext(b),a=t;return e&&(a="function"==typeof e?e(t):c(c({},t),e)),a},p=function(e){var t=s(e.components);return r.a.createElement(b.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return r.a.createElement(r.a.Fragment,{},t)}},d=r.a.forwardRef((function(e,t){var a=e.components,n=e.mdxType,o=e.originalType,i=e.parentName,b=l(e,["components","mdxType","originalType","parentName"]),p=s(a),d=n,m=p["".concat(i,".").concat(d)]||p[d]||u[d]||o;return a?r.a.createElement(m,c(c({ref:t},b),{},{components:a})):r.a.createElement(m,c({ref:t},b))}));function m(e,t){var a=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var o=a.length,i=new Array(o);i[0]=d;var c={};for(var l in t)hasOwnProperty.call(t,l)&&(c[l]=t[l]);c.originalType=e,c.mdxType="string"==typeof e?e:n,i[1]=c;for(var b=2;b<o;b++)i[b]=a[b];return r.a.createElement.apply(null,i)}return r.a.createElement.apply(null,a)}d.displayName="MDXCreateElement"}}]);